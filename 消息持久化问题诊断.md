# ğŸ” æ¶ˆæ¯æŒä¹…åŒ–é—®é¢˜è¯Šæ–­

## âŒ **é—®é¢˜ç°è±¡**
- âœ… å‘é€æ¶ˆæ¯ï¼šå¯ä»¥çœ‹åˆ°
- âŒ åˆ‡æ¢é¡µé¢ï¼šæ¶ˆæ¯æ¶ˆå¤±
- âŒ åˆ·æ–°é¡µé¢ï¼šæ¶ˆæ¯æ¶ˆå¤±

## ğŸ› **æ ¹æœ¬åŸå› **

ç³»ç»Ÿå½“å‰è¿è¡Œåœ¨**å¼€å‘æ¨¡å¼ï¼ˆisDevMode = trueï¼‰**ï¼Œå› ä¸ºï¼š

### æ£€æŸ¥1ï¼šNetlifyç¯å¢ƒå˜é‡æœªé…ç½®

```javascript
// src/lib/supabase.ts
const supabaseUrl = import.meta.env.VITE_SUPABASE_URL || 'https://placeholder.supabase.co'
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY || 'placeholder-key'

// å¦‚æœURLæ˜¯placeholderï¼Œç³»ç»Ÿè¿›å…¥å¼€å‘æ¨¡å¼
export const isDevMode = supabaseUrl.includes('placeholder')
```

**ç»“æœ**ï¼š
- âš ï¸ `VITE_SUPABASE_URL` æœªé…ç½® â†’ ä½¿ç”¨ `placeholder`
- âš ï¸ `VITE_SUPABASE_ANON_KEY` æœªé…ç½® â†’ ä½¿ç”¨ `placeholder-key`
- âš ï¸ `isDevMode = true` â†’ æ¶ˆæ¯åªå­˜åœ¨å†…å­˜ä¸­

### æ£€æŸ¥2ï¼šå¼€å‘æ¨¡å¼è¡Œä¸º

```javascript
// src/views/chat/ChatView.vue (ç¬¬598è¡Œ)
// ä¿å­˜åˆ°æ•°æ®åº“ï¼ˆå¦‚æœä¸æ˜¯å¼€å‘æ¨¡å¼ï¼‰
if (!isDevMode) {
  // ä¿å­˜åˆ°æ•°æ®åº“
  const { data, error } = await supabase.from('messages').insert(...)
}
```

**å¼€å‘æ¨¡å¼ä¸‹**ï¼š
- âŒ ä¸ä¼šæ‰§è¡Œæ•°æ®åº“ä¿å­˜
- âŒ æ¶ˆæ¯åªåœ¨ `messages.value` æ•°ç»„ä¸­
- âŒ åˆ‡æ¢é¡µé¢/åˆ·æ–° â†’ æ•°ç»„æ¸…ç©º â†’ æ¶ˆæ¯æ¶ˆå¤±

## âœ… **è§£å†³æ–¹æ¡ˆ**

### æ–¹æ¡ˆ1ï¼šé…ç½®Supabaseï¼ˆæ¨èï¼Œç”Ÿäº§ç¯å¢ƒï¼‰

#### æ­¥éª¤Aï¼šè·å–Supabaseå‡­æ®

å¦‚æœæ‚¨å·²ç»æœ‰Supabaseé¡¹ç›®ï¼š

1. è®¿é—®ï¼šhttps://supabase.com/dashboard
2. é€‰æ‹©æ‚¨çš„é¡¹ç›®
3. Settings â†’ API
4. å¤åˆ¶ï¼š
   ```
   Project URL: https://xxxxx.supabase.co
   anon public key: eyJxxx...
   ```

å¦‚æœè¿˜æ²¡æœ‰Supabaseé¡¹ç›®ï¼Œå‚è€ƒï¼š`SUPABASE_QUICK_SETUP.md`

#### æ­¥éª¤Bï¼šé…ç½®åˆ°Netlify

**æ–¹æ³•1ï¼šé€šè¿‡CLIï¼ˆå¿«ï¼‰**

```powershell
# 1. è®¾ç½®ç¯å¢ƒå˜é‡
netlify env:set VITE_SUPABASE_URL "https://ä½ çš„é¡¹ç›®.supabase.co"
netlify env:set VITE_SUPABASE_ANON_KEY "eyJä½ çš„å¯†é’¥..."

# 2. é‡æ–°éƒ¨ç½²
npm run build
npx netlify deploy --prod
```

**æ–¹æ³•2ï¼šé€šè¿‡ç½‘ç«™åå°ï¼ˆç›´è§‚ï¼‰**

1. è®¿é—®ï¼šhttps://app.netlify.com/sites/eth10/settings/env
2. ç‚¹å‡» "Add a variable"
3. æ·»åŠ å˜é‡ï¼š
   - **Key**: `VITE_SUPABASE_URL`  
     **Value**: `https://ä½ çš„é¡¹ç›®.supabase.co`
   
   - **Key**: `VITE_SUPABASE_ANON_KEY`  
     **Value**: `eyJä½ çš„å¯†é’¥...`

4. ä¿å­˜åï¼Œåˆ° Deploys é¡µé¢
5. ç‚¹å‡» "Trigger deploy" â†’ "Clear cache and deploy site"

#### æ­¥éª¤Cï¼šéªŒè¯é…ç½®

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ï¼š`https://eth10.netlify.app/chat`

æ‰“å¼€æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
```
âœ… æ²¡æœ‰ "âš ï¸ å¼€å‘æ¨¡å¼" çš„è­¦å‘Š
âœ… æ¶ˆæ¯å‘é€åï¼Œæ§åˆ¶å°æ˜¾ç¤ºæ•°æ®åº“æ“ä½œ
âœ… åˆ‡æ¢é¡µé¢åï¼Œæ¶ˆæ¯ä¾ç„¶å­˜åœ¨
```

---

### æ–¹æ¡ˆ2ï¼šä¸´æ—¶ä¿®å¤ï¼ˆä»…ç”¨äºæµ‹è¯•ï¼‰

å¦‚æœæš‚æ—¶æ²¡æœ‰Supabaseï¼Œå¯ä»¥ä½¿ç”¨localStorageä¿å­˜æ¶ˆæ¯ï¼š

**ä¿®æ”¹ `src/views/chat/ChatView.vue`**ï¼š

```javascript
// å‘é€æ¶ˆæ¯åä¿å­˜åˆ°localStorage
if (!isDevMode) {
  // åŸæœ‰çš„æ•°æ®åº“ä¿å­˜é€»è¾‘
} else {
  // å¼€å‘æ¨¡å¼ï¼šä¿å­˜åˆ°localStorage
  const storageKey = `messages_${currentGroup.value.id}`
  const existingMessages = JSON.parse(localStorage.getItem(storageKey) || '[]')
  existingMessages.push(tempMessage)
  localStorage.setItem(storageKey, JSON.stringify(existingMessages))
}

// åŠ è½½æ¶ˆæ¯æ—¶ä»localStorageè¯»å–
const loadMessages = async (groupId: string) => {
  if (isDevMode) {
    const storageKey = `messages_${groupId}`
    const storedMessages = JSON.parse(localStorage.getItem(storageKey) || '[]')
    messages.value = storedMessages
  } else {
    // åŸæœ‰çš„æ•°æ®åº“åŠ è½½é€»è¾‘
  }
}
```

**âš ï¸ æ³¨æ„**ï¼šè¿™åªæ˜¯ä¸´æ—¶æ–¹æ¡ˆï¼Œä¸é€‚åˆç”Ÿäº§ç¯å¢ƒï¼

---

## ğŸ¯ **æ¨èçš„å®Œæ•´é…ç½®æ­¥éª¤**

### 1. åˆ›å»ºSupabaseé¡¹ç›®ï¼ˆ5åˆ†é’Ÿï¼‰

```bash
1. è®¿é—® https://supabase.com/
2. New project
3. é¡¹ç›®åï¼šai-airdrop
4. Region: Northeast Asia (Tokyo)
5. ç­‰å¾…åˆå§‹åŒ–å®Œæˆ
```

### 2. å¯¼å…¥æ•°æ®åº“ç»“æ„ï¼ˆ2åˆ†é’Ÿï¼‰

```bash
1. Supabase â†’ SQL Editor
2. New query
3. å¤åˆ¶ç²˜è´´ï¼šsupabase/schema.sql çš„å†…å®¹
4. Run
```

### 3. é…ç½®Netlifyç¯å¢ƒå˜é‡ï¼ˆ2åˆ†é’Ÿï¼‰

```powershell
netlify env:set VITE_SUPABASE_URL "https://ä½ çš„é¡¹ç›®.supabase.co"
netlify env:set VITE_SUPABASE_ANON_KEY "eyJä½ çš„å¯†é’¥..."
```

### 4. é‡æ–°éƒ¨ç½²ï¼ˆ1åˆ†é’Ÿï¼‰

```powershell
npm run build
npx netlify deploy --prod
```

### 5. æµ‹è¯•éªŒè¯ï¼ˆ1åˆ†é’Ÿï¼‰

```bash
1. è®¿é—® https://eth10.netlify.app/chat
2. å‘é€æ¶ˆæ¯
3. åˆ‡æ¢åˆ°å…¶ä»–é¡µé¢
4. è¿”å›èŠå¤©
5. âœ… æ¶ˆæ¯åº”è¯¥è¿˜åœ¨ï¼
```

---

## ğŸ“Š **å½“å‰ç³»ç»ŸçŠ¶æ€**

| ç»„ä»¶ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| å‰ç«¯ä»£ç  | âœ… å·²ä¿®å¤ | æ¶ˆæ¯ä¿å­˜é€»è¾‘å·²å®ç° |
| æ•°æ®åº“é…ç½® | âŒ æœªé…ç½® | ç¼ºå°‘Supabaseç¯å¢ƒå˜é‡ |
| è¿è¡Œæ¨¡å¼ | âš ï¸ å¼€å‘æ¨¡å¼ | isDevMode = true |
| æ¶ˆæ¯æŒä¹…åŒ– | âŒ ä¸å·¥ä½œ | æ•°æ®ä¸ä¿å­˜åˆ°æ•°æ®åº“ |

---

## ğŸ”§ **å¿«é€Ÿè¯Šæ–­å‘½ä»¤**

### æ£€æŸ¥å½“å‰é…ç½®ï¼š

```powershell
# æŸ¥çœ‹Netlifyç¯å¢ƒå˜é‡
netlify env:list

# åº”è¯¥çœ‹åˆ°ï¼š
# VITE_SUPABASE_URL
# VITE_SUPABASE_ANON_KEY
```

å¦‚æœçœ‹ä¸åˆ°è¿™ä¸¤ä¸ªå˜é‡ï¼Œè¯´æ˜**éœ€è¦é…ç½®Supabase**ï¼

---

## ğŸ’¡ **æ€»ç»“**

**é—®é¢˜ä¸åœ¨ä»£ç ï¼Œè€Œåœ¨é…ç½®ï¼**

- âœ… ä»£ç å·²ç»å†™å¥½äº†æ¶ˆæ¯ä¿å­˜é€»è¾‘
- âŒ ä½†æ˜¯ç¼ºå°‘æ•°æ®åº“é…ç½®
- âŒ æ‰€ä»¥ç³»ç»Ÿè¿è¡Œåœ¨å¼€å‘æ¨¡å¼
- âŒ å¼€å‘æ¨¡å¼ä¸‹æ¶ˆæ¯ä¸ä¼šä¿å­˜

**è§£å†³æ–¹æ¡ˆ**ï¼šé…ç½®Supabaseç¯å¢ƒå˜é‡ï¼

---

**éœ€è¦å¸®åŠ©å—ï¼Ÿ**

å¦‚æœæ‚¨ï¼š
- â“ æ²¡æœ‰Supabaseè´¦å·
- â“ ä¸çŸ¥é“å¦‚ä½•è·å–å¯†é’¥
- â“ ä¸ç¡®å®šå¦‚ä½•é…ç½®Netlify

è¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘å¯ä»¥æä¾›**è¯¦ç»†çš„å›¾æ–‡æ­¥éª¤**æˆ–**å¸®æ‚¨ä¸€æ­¥æ­¥æ“ä½œ**ï¼





















