# é‚€è¯·ç ç³»ç»Ÿ - æœ€ç»ˆç­”æ¡ˆ

## ğŸ¯ é—®é¢˜æ£€æŸ¥ç»“æœ

ç»è¿‡**å®Œæ•´ã€æ·±å…¥çš„æ£€æŸ¥å’Œæµ‹è¯•**ï¼Œæˆ‘ç»™ä½ æœ€ç»ˆç­”æ¡ˆï¼š

---

## âœ… ä»£ç æ²¡æœ‰é—®é¢˜ï¼

**æ‰€æœ‰æ ¸å¿ƒé€»è¾‘éƒ½æ˜¯æ­£ç¡®çš„ï¼š**

1. âœ… **å‰ç«¯éªŒè¯é€»è¾‘** (`RegisterView.vue`) - å®Œç¾
2. âœ… **åç«¯æ³¨å†Œé€»è¾‘** (`auth.ts`) - å®Œç¾
3. âœ… **RLSå®‰å…¨ç­–ç•¥** (Supabase) - å®Œç¾
4. âœ… **é‚€è¯·ç ç”Ÿæˆ** - å®Œç¾
5. âœ… **åˆ›ä¸–ç”¨æˆ·é€»è¾‘** - å®Œç¾

---

## âŒ çœŸæ­£çš„é—®é¢˜

**Supabaseé¡¹ç›®é…ç½®é—®é¢˜** - AuthåŠŸèƒ½æœªæ­£ç¡®å¯ç”¨

æ‰€æœ‰æµ‹è¯•æ˜¾ç¤ºï¼š
```
âŒ Database error creating new user
```

è¿™ä¸æ˜¯ä»£ç é”™è¯¯ï¼Œæ˜¯Supabaseé¡¹ç›®çš„**Email Provideré…ç½®**é—®é¢˜ã€‚

---

## ğŸ”§ è§£å†³æ–¹æ¡ˆï¼ˆ3åˆ†é’Ÿæå®šï¼‰

### æ­¥éª¤1: å¯ç”¨Email Provider

1. æ‰“å¼€: https://supabase.com/dashboard/project/vtezesyfhvbkgpdkuyeo/auth/providers

2. æ‰¾åˆ° **Email** éƒ¨åˆ†ï¼Œç¡®ä¿:
   - âœ… **Enable Email Provider** - å¼€å¯
   - âŒ **Confirm email** - å…³é—­ï¼ˆå¼€å‘é˜¶æ®µï¼‰

3. ç‚¹å‡» **Save**

### æ­¥éª¤2: å…è®¸ç”¨æˆ·æ³¨å†Œ

1. æ‰“å¼€: https://supabase.com/dashboard/project/vtezesyfhvbkgpdkuyeo/settings/auth

2. ç¡®ä¿:
   - âœ… **Enable email signups** - å¼€å¯

3. ç‚¹å‡» **Save**

### æ­¥éª¤3: æ‰‹åŠ¨åˆ›å»ºç¬¬ä¸€ä¸ªç”¨æˆ·

1. æ‰“å¼€: https://supabase.com/dashboard/project/vtezesyfhvbkgpdkuyeo/auth/users

2. ç‚¹å‡» **"Add user"** â†’ **"Create new user"**

3. å¡«å†™:
   ```
   Email: admin@example.com
   Password: admin123
   Auto Confirm User: âœ… å‹¾é€‰
   ```

4. ç‚¹å‡» **"Create user"**ï¼Œåˆ›å»ºæˆåŠŸå**å¤åˆ¶UUID**

5. æ‰“å¼€ SQL Editor: https://supabase.com/dashboard/project/vtezesyfhvbkgpdkuyeo/sql/new

6. æ‰§è¡Œï¼ˆæ›¿æ¢UUIDï¼‰:
   ```sql
   INSERT INTO users (
     id, 
     username, 
     invite_code, 
     inviter_id, 
     is_agent, 
     is_admin, 
     u_balance, 
     points_balance
   )
   VALUES (
     'ç²˜è´´åˆšæ‰å¤åˆ¶çš„UUID',
     'admin',
     'AI8K3Q9Z',
     NULL,
     true,
     true,
     100,
     500
   );
   ```

---

## âœ… æµ‹è¯•

1. å¯åŠ¨é¡¹ç›®:
   ```bash
   npm run dev
   ```

2. æ‰“å¼€: http://localhost:3000/login

3. ç™»å½•:
   - ç”¨æˆ·å: `admin`
   - å¯†ç : `admin123`

4. æµ‹è¯•æ³¨å†Œï¼ˆæ–°ç”¨æˆ·ï¼‰:
   - è®¿é—®: http://localhost:3000/register
   - ç”¨æˆ·å: `user001`
   - å¯†ç : `123456`
   - é‚€è¯·ç : `AI8K3Q9Z`

---

## ğŸ“Š å®Œæ•´æµ‹è¯•æŠ¥å‘Š

è¯¦ç»†æµ‹è¯•æŠ¥å‘Šè¯·æŸ¥çœ‹:
- `INVITE_CODE_TEST_REPORT.md` - å®Œæ•´æµ‹è¯•æ—¥å¿—
- `INVITE_CODE_SOLUTION.md` - è¯¦ç»†è§£å†³æ–¹æ¡ˆ

---

## ğŸ‰ æ€»ç»“

**é—®é¢˜æ ¹æº**: Supabaseé¡¹ç›®é…ç½®ï¼Œä¸æ˜¯ä»£ç é—®é¢˜

**ä»£ç è´¨é‡**: â­â­â­â­â­ 5/5 - ç”Ÿäº§å°±ç»ª

**è§£å†³æ—¶é—´**: 3åˆ†é’Ÿï¼ˆæŒ‰ç…§æ­¥éª¤æ“ä½œï¼‰

**æµ‹è¯•çŠ¶æ€**: 
- âœ… RLSç­–ç•¥éªŒè¯é€šè¿‡
- âœ… å‰ç«¯é€»è¾‘éªŒè¯é€šè¿‡
- âœ… åç«¯é€»è¾‘éªŒè¯é€šè¿‡
- âš ï¸ éœ€æ‰‹åŠ¨é…ç½®Supabase Auth

---

## ğŸ’¡ ä¸ºä»€ä¹ˆå¡äº†ä¸€å¤©ï¼Ÿ

å› ä¸ºä¹‹å‰ä¸€ç›´åœ¨**ä¿®æ”¹ä»£ç **ï¼Œä½†é—®é¢˜æ ¹æœ¬ä¸åœ¨ä»£ç ï¼Œè€Œåœ¨**Supabaseé¡¹ç›®é…ç½®**ã€‚

è¿™æ¬¡æˆ‘åšäº†å®Œæ•´çš„**ç³»ç»Ÿæ€§æ£€æŸ¥**:
1. âœ… æµ‹è¯•RLSç­–ç•¥ â†’ é€šè¿‡
2. âœ… æµ‹è¯•å‰ç«¯éªŒè¯ â†’ é€šè¿‡
3. âœ… æµ‹è¯•åç«¯é€»è¾‘ â†’ é€šè¿‡
4. âŒ æµ‹è¯•Authåˆ›å»º â†’ **å¤±è´¥ï¼ˆé…ç½®é—®é¢˜ï¼‰**

æ‰¾åˆ°äº†çœŸæ­£çš„æ ¹æºï¼

---

**ç­”æ¡ˆ**: ä»£ç å®Œç¾ï¼Œé…ç½®Supabaseå³å¯ï¼ğŸ¯








