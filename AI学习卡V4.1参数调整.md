# AI学习卡 V4.1 参数调整

**调整日期**：2025-10-15  
**版本**：V4.1（参数优化版）

---

## 📋 用户需求

1. **成为代理（30U）**：自动送100积分学习卡
2. **基础释放率**：1%/天（降低）
3. **直推加速**：+2%/人（降低）
4. **最高释放率**：20%（1%基础+19%加速）
5. **复购30U**：二元系统复投，不送积分卡
6. **重启**：需重新购买8U兑换
7. **70%到账U，30%销毁**：保持不变

---

## ✅ 调整内容

### 1️⃣ 配置文件（`src/config/mining.ts`）

**核心参数调整**：

```typescript
// ✅ V4.0 → V4.1
MACHINE: {
  BASE_RELEASE_RATE: 0.01,      // 2% → 1%/天
  DAILY_OUTPUT: 1,              // 2积分 → 1积分（100×1%）
}

RELEASE: {
  BASE_RATE: 0.01,              // 2% → 1%/天
  BOOST_PER_REFERRAL: 0.02,     // +3% → +2%/人
  MAX_BOOST: 0.19,              // 18% → 19%（9个直推×2%）
  MAX_REFERRALS: 9,             // 6个 → 9个（1%+9×2%=19%，共20%）
}
```

**注释更新**：
```typescript
/**
 * AI学习卡系统配置 V4.0
 * 更新日期：2025-10-15
 * 核心变更：签到释放 + 1%基础 + 3倍出局 + 直推加速2% + 70%到账30%销毁
 */
```

---

### 2️⃣ 后端逻辑（`src/services/MiningService.ts`）

**文件头注释**：

```typescript
/**
 * MiningService - AI学习卡系统服务 V4.0
 * 
 * 实现AI学习卡核心业务逻辑：
 * 1. 加入代理（30U）自动送100积分（可激活第1张学习卡）
 * 2. U余额兑换学习卡（8U = 100积分）
 * 3. 每日签到释放（不签到不释放）
 * 4. 基础释放率1%/天 + 直推加速2%/人，最高20%
 * 5. 3倍出局（30-300天）
 * 6. 70%到账U余额，30%自动销毁清0
 */
```

**释放率计算方法**：

```typescript
/**
 * 计算释放率（基础1% + 直推加速2%/人，最高20%）
 */
private static async calculateReleaseRate(userId: string): Promise<number> {
  // 1. 基础释放率
  let rate = AILearningConfig.RELEASE.BASE_RATE // 1%
  
  // 2. 查询直推AI代理数量
  // ...
  
  // 3. 计算加速（每个直推+2%，最多9个）
  const referralCount = Math.min(count || 0, AILearningConfig.RELEASE.MAX_REFERRALS)
  const boost = referralCount * AILearningConfig.RELEASE.BOOST_PER_REFERRAL
  
  // 4. 总释放率（不超过20%）
  rate = Math.min(rate + boost, AILearningConfig.RELEASE.MAX_RATE)
  
  console.log(`用户 ${userId} 释放率计算：基础1% + 直推${referralCount}人×2% = ${rate*100}%`)
}
```

---

### 3️⃣ 前端显示（`src/views/points/PointsView.vue`）

**核心参数显示**：

```vue
<!-- ✅ 修改前 -->
每日签到 · 2-20%释放 · 3倍出局 · 70%到账30%销毁
基础释放：2%/天
直推加速：+3%

<!-- ✅ 修改后 -->
每日签到 · 1-20%释放 · 3倍出局 · 70%到账30%销毁
基础释放：1%/天
直推加速：+2%
```

**系统说明**：

```vue
<!-- ✅ 修改 -->
📊 每日收益：1-20%日释放率（直推加速+2%），70%转U，30%自动销毁，3倍出局

<!-- ✅ 重启提示 -->
⚠️ 确认重启这台学习卡吗？

重启后：
- 所有累计积分清0销毁
- 重新开始3倍出局（300积分）
- 学习等级重置为0
- 继续1-20%日释放率（直推加速+2%）
```

---

## 📊 V4.1 完整参数表

| 参数 | V4.0 | V4.1 | 说明 |
|------|------|------|------|
| 兑换成本 | 8U | 8U | 100积分/张 |
| 出局倍数 | 3倍 | 3倍 | 总产出300积分 |
| **基础释放** | **2%** | **1%** | **降低50%** |
| **直推加速** | **+3%** | **+2%** | **降低33%** |
| 最高释放率 | 20% | 20% | 不变 |
| **达到20%需** | **6个直推** | **9个直推** | **提高门槛** |
| 70%到账 | U余额 | U余额 | 1积分=0.08U |
| 30%销毁 | 清0 | 清0 | 防泡沫 |
| **预计周期** | **15-150天** | **30-300天** | **延长2倍** |

---

## 🎯 释放率对照表

| 直推AI代理数 | V4.0释放率 | V4.1释放率 | 差异 |
|-------------|-----------|-----------|------|
| 0人 | 2% | **1%** | -50% |
| 1人 | 5% | **3%** | -40% |
| 2人 | 8% | **5%** | -37.5% |
| 3人 | 11% | **7%** | -36% |
| 4人 | 14% | **9%** | -35.7% |
| 5人 | 17% | **11%** | -35.3% |
| 6人 | 20% | **13%** | -35% |
| 7人 | 20%（上限） | **15%** | -25% |
| 8人 | 20%（上限） | **17%** | -15% |
| 9人 | 20%（上限） | **19%** | -5% |
| **10人+** | **20%（上限）** | **20%（上限）** | **-** |

---

## 💰 收益对比示例

假设1张学习卡（100积分），每天签到：

### 无直推（基础释放率）

| 参数 | V4.0 | V4.1 |
|------|------|------|
| 日释放 | 2积分 | **1积分** |
| 70%到U | 1.4积分 = 0.112U | **0.7积分 = 0.056U** |
| 30%销毁 | 0.6积分 | **0.3积分** |
| 出局天数 | 150天 | **300天** |

### 直推1人

| 参数 | V4.0 | V4.1 |
|------|------|------|
| 释放率 | 5% | **3%** |
| 日释放 | 5积分 | **3积分** |
| 70%到U | 3.5积分 = 0.28U | **2.1积分 = 0.168U** |
| 出局天数 | 60天 | **100天** |

### 直推6人（V4.0上限）

| 参数 | V4.0 | V4.1 |
|------|------|------|
| 释放率 | 20% | **13%** |
| 日释放 | 20积分 | **13积分** |
| 70%到U | 14积分 = 1.12U | **9.1积分 = 0.728U** |
| 出局天数 | 15天 | **23天** |

### 直推9人+（V4.1上限）

| 参数 | V4.0 | V4.1 |
|------|------|------|
| 释放率 | 20%（6人即达） | **20%（9人达）** |
| 日释放 | 20积分 | **20积分** |
| 70%到U | 14积分 = 1.12U | **14积分 = 1.12U** |
| 出局天数 | 15天 | **15天** |

---

## 🎯 调整影响分析

### ✅ 优点

1. **延长周期**：30-300天（之前15-150天），更持久
2. **提高直推门槛**：9个直推才能达到20%上限（之前6个）
3. **降低基础收益**：减少无直推用户的快速出局
4. **激励推广**：直推加速效果更明显
5. **降低通胀**：每日释放量减少50%

### ⚠️ 注意事项

1. **用户收益降低**：基础释放率减半
2. **出局时间延长**：可能影响用户体验
3. **推广压力增加**：需要更多直推才能达到高释放率

---

## 📦 修改的文件

1. `src/config/mining.ts` - 配置参数
2. `src/services/MiningService.ts` - 后端逻辑注释
3. `src/views/points/PointsView.vue` - 前端显示

---

## 🧪 建议测试

### 1. 基础释放率测试

- [ ] 无直推用户签到：确认释放1积分（1%）
- [ ] 确认70%（0.7积分）转U余额（0.056U）
- [ ] 确认30%（0.3积分）销毁

### 2. 直推加速测试

- [ ] 直推1人：确认释放率3%（1%+2%）
- [ ] 直推2人：确认释放率5%（1%+4%）
- [ ] 直推9人：确认释放率19%（1%+18%）
- [ ] 直推10人+：确认释放率20%（上限）

### 3. 出局测试

- [ ] 基础1%：确认300天出局
- [ ] 20%上限：确认15天出局

### 4. 显示测试

- [ ] 前端显示"1-20%释放"
- [ ] 前端显示"基础释放1%/天"
- [ ] 前端显示"直推加速+2%"

---

## 🚀 部署计划

1. **提交代码**：提交V4.1参数调整
2. **推送远程**：更新GitHub仓库
3. **自动部署**：Netlify自动部署
4. **功能测试**：验证新参数生效
5. **用户通知**：通知用户参数调整

---

**调整完成时间**：2025-10-15  
**当前版本**：V4.1（1%基础 + 2%加速 + 3倍出局）

---

## 📝 总结

V4.1调整主要降低了基础释放率（2%→1%）和直推加速率（+3%→+2%），同时提高了达到最高释放率的直推门槛（6人→9人）。这将：

1. **延长用户参与周期**（30-300天）
2. **激励用户推广**（需要更多直推才能高收益）
3. **降低系统通胀**（每日释放量减少）
4. **保持70%+30%分配**（到账U + 销毁防泡沫）

同时保留了V4.0的核心机制：3倍出局、签到制、30%销毁防泡沫。

