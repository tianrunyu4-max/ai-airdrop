# ğŸš€ ç”Ÿäº§æ¨¡å¼é…ç½® - è¿æ¥çœŸå® Supabase

## âœ… å·²å®Œæˆçš„ä¿®æ”¹

å·²å°†ä»£ç æ”¹å›**ç”Ÿäº§æ¨¡å¼**ï¼Œç°åœ¨ä¼šè¿æ¥çœŸå®çš„ Supabase æ•°æ®åº“ã€‚

## ğŸ“‹ é…ç½®æ­¥éª¤

### 1. ç¡®ä¿æœ‰çœŸå®çš„ Supabase é…ç½®

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰ï¼š

```bash
# .env
VITE_SUPABASE_URL=ä½ çš„çœŸå®Supabase URL
VITE_SUPABASE_ANON_KEY=ä½ çš„çœŸå®Supabaseå¯†é’¥
```

**æ³¨æ„**ï¼šä¸è¦ä½¿ç”¨ `placeholder` å­—æ ·ï¼Œå¦åˆ™ä¼šè¿›å…¥å¼€å‘æ¨¡å¼ã€‚

### 2. é‡å¯å¼€å‘æœåŠ¡å™¨

```bash
# åœæ­¢å½“å‰æœåŠ¡å™¨ï¼ˆCtrl+Cï¼‰
# é‡æ–°å¯åŠ¨
npm run dev
```

### 3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

```
æŒ‰ Ctrl + Shift + Delete
é€‰æ‹©"ç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶"
ç‚¹å‡»"æ¸…é™¤æ•°æ®"
```

---

## ğŸ”„ æ¨¡å¼å¯¹æ¯”

### å¼€å‘æ¨¡å¼ï¼ˆlocalStorageï¼‰
- âœ… **ä¼˜ç‚¹**ï¼šå¿«é€Ÿã€æ— éœ€ç½‘ç»œã€ç¦»çº¿å¯ç”¨
- âŒ **ç¼ºç‚¹**ï¼šæ•°æ®åªåœ¨æœ¬åœ°ã€åˆ·æ–°å¯èƒ½ä¸¢å¤±
- ğŸ”§ **è§¦å‘æ¡ä»¶**ï¼š`VITE_SUPABASE_URL` åŒ…å« `placeholder`

### ç”Ÿäº§æ¨¡å¼ï¼ˆSupabaseï¼‰
- âœ… **ä¼˜ç‚¹**ï¼šçœŸå®æ•°æ®ã€å¤šç«¯åŒæ­¥ã€æ°¸ä¹…ä¿å­˜
- âŒ **ç¼ºç‚¹**ï¼šéœ€è¦ç½‘ç»œã€é€Ÿåº¦å–å†³äºç½‘ç»œ
- ğŸ”§ **è§¦å‘æ¡ä»¶**ï¼šçœŸå®çš„ Supabase URL

---

## ğŸŒ å…³äºåˆ·æ–°é€Ÿåº¦æ…¢çš„é—®é¢˜

### åŸå› åˆ†æ

**ç”Ÿäº§æ¨¡å¼ä¸‹åˆ·æ–°æ…¢æ˜¯æ­£å¸¸çš„**ï¼Œå› ä¸ºï¼š

1. **éœ€è¦ç½‘ç»œè¯·æ±‚** - ä» Supabase è·å– session
2. **éœ€è¦æŸ¥è¯¢æ•°æ®åº“** - è·å–ç”¨æˆ·ä¿¡æ¯
3. **ç½‘ç»œå»¶è¿Ÿ** - å–å†³äº Supabase æœåŠ¡å™¨ä½ç½®

### ä¼˜åŒ–æ–¹æ¡ˆ

#### æ–¹æ¡ˆ 1ï¼šå¯ç”¨ Session ç¼“å­˜ï¼ˆå·²é…ç½®ï¼‰
```typescript
// src/lib/supabase.ts
export const supabase = createClient(supabaseUrl, supabaseAnonKey, {
  auth: {
    autoRefreshToken: true,
    persistSession: true,  // âœ… å·²å¯ç”¨
    detectSessionInUrl: true
  }
})
```

#### æ–¹æ¡ˆ 2ï¼šå‡å°‘åŠ è½½ç•Œé¢æ—¶é—´
```typescript
// src/App.vue
// å¯ä»¥å‡å°‘ç­‰å¾…æ—¶é—´ï¼Œä½†å¯èƒ½çœ‹ä¸åˆ°åŠ è½½åŠ¨ç”»
await new Promise(resolve => setTimeout(resolve, 50)) // ä» 100 æ”¹ä¸º 50
```

#### æ–¹æ¡ˆ 3ï¼šæ·»åŠ æœ¬åœ°ç¼“å­˜
å¯ä»¥ç¼“å­˜ç”¨æˆ·ä¿¡æ¯åˆ° localStorageï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢ï¼š

```typescript
// ç™»å½•åç¼“å­˜
localStorage.setItem('user_cache', JSON.stringify(userData))

// åˆ·æ–°æ—¶å…ˆä»ç¼“å­˜è¯»å–
const cache = localStorage.getItem('user_cache')
if (cache) {
  user.value = JSON.parse(cache)
  // ç„¶åå¼‚æ­¥æ›´æ–°
  fetchUserProfile(userId).then(data => {
    user.value = data
    localStorage.setItem('user_cache', JSON.stringify(data))
  })
}
```

---

## âš¡ æ¨èé…ç½®

### å¼€å‘ç¯å¢ƒï¼ˆæœ¬åœ°æµ‹è¯•ï¼‰
ä½¿ç”¨**å¼€å‘æ¨¡å¼**ï¼ˆlocalStorageï¼‰ï¼š
- å¿«é€Ÿ
- æ— éœ€ç½‘ç»œ
- é€‚åˆé¢‘ç¹åˆ·æ–°æµ‹è¯•

**é…ç½®**ï¼š
```bash
# .env.local
VITE_SUPABASE_URL=https://placeholder.supabase.co
VITE_SUPABASE_ANON_KEY=placeholder-key
```

### ç”Ÿäº§ç¯å¢ƒï¼ˆæ­£å¼éƒ¨ç½²ï¼‰
ä½¿ç”¨**ç”Ÿäº§æ¨¡å¼**ï¼ˆSupabaseï¼‰ï¼š
- çœŸå®æ•°æ®
- å¤šç«¯åŒæ­¥
- æ•°æ®æŒä¹…åŒ–

**é…ç½®**ï¼š
```bash
# .env
VITE_SUPABASE_URL=https://ä½ çš„é¡¹ç›®.supabase.co
VITE_SUPABASE_ANON_KEY=çœŸå®çš„å¯†é’¥
```

---

## ğŸ”§ å¿«é€Ÿåˆ‡æ¢æ¨¡å¼

### åˆ‡æ¢åˆ°å¼€å‘æ¨¡å¼ï¼ˆå¿«é€Ÿï¼‰
```bash
npm run dev
# æˆ–åˆ›å»º .env.local
echo "VITE_SUPABASE_URL=https://placeholder.supabase.co" > .env.local
echo "VITE_SUPABASE_ANON_KEY=placeholder-key" >> .env.local
npm run dev
```

### åˆ‡æ¢åˆ°ç”Ÿäº§æ¨¡å¼ï¼ˆçœŸå®æ•°æ®åº“ï¼‰
```bash
# åˆ é™¤ .env.localï¼ˆå¦‚æœå­˜åœ¨ï¼‰
rm .env.local  # Mac/Linux
del .env.local  # Windows

# ç¡®ä¿ .env æœ‰çœŸå®é…ç½®
npm run dev
```

---

## ğŸ“Š æ€§èƒ½æ•°æ®

### å¼€å‘æ¨¡å¼ï¼ˆlocalStorageï¼‰
- åˆå§‹åŒ–æ—¶é—´ï¼š< 50ms
- åˆ·æ–°é€Ÿåº¦ï¼šâš¡âš¡âš¡âš¡âš¡ æå¿«
- é€‚ç”¨åœºæ™¯ï¼šæœ¬åœ°å¼€å‘ã€æµ‹è¯•

### ç”Ÿäº§æ¨¡å¼ï¼ˆSupabaseï¼‰
- åˆå§‹åŒ–æ—¶é—´ï¼š200-500msï¼ˆå–å†³äºç½‘ç»œï¼‰
- åˆ·æ–°é€Ÿåº¦ï¼šâš¡âš¡âš¡ è¾ƒå¿«
- é€‚ç”¨åœºæ™¯ï¼šç”Ÿäº§éƒ¨ç½²ã€å¤šç«¯åŒæ­¥

---

## ğŸ¯ å½“å‰çŠ¶æ€

**ä»£ç å·²æ”¹ä¸ºç”Ÿäº§æ¨¡å¼**

- âœ… ä¼šè¿æ¥çœŸå® Supabase æ•°æ®åº“
- âœ… Session ä¼šè‡ªåŠ¨æŒä¹…åŒ–
- âœ… åˆ·æ–°åä¿æŒç™»å½•çŠ¶æ€
- âš ï¸ é€Ÿåº¦å–å†³äºç½‘ç»œçŠ¶å†µ

---

## ğŸ’¡ å»ºè®®

1. **æœ¬åœ°å¼€å‘æ—¶**ï¼šä½¿ç”¨å¼€å‘æ¨¡å¼ï¼ˆå¿«ï¼‰
2. **æµ‹è¯•åŠŸèƒ½æ—¶**ï¼šä½¿ç”¨ç”Ÿäº§æ¨¡å¼ï¼ˆçœŸå®ï¼‰
3. **æ­£å¼éƒ¨ç½²æ—¶**ï¼šå¿…é¡»ä½¿ç”¨ç”Ÿäº§æ¨¡å¼

---

**ç°åœ¨è¯·é‡å¯å¼€å‘æœåŠ¡å™¨ï¼ˆCtrl+C ç„¶å npm run devï¼‰æŸ¥çœ‹æ•ˆæœï¼**

---

æ›´æ–°æ—¶é—´ï¼š2025-10-11  
å½“å‰æ¨¡å¼ï¼šâœ… ç”Ÿäº§æ¨¡å¼ï¼ˆSupabaseï¼‰

