# 🤖 智能客服机器人使用说明

## ✅ 已完成的修改

### 1. 聊天群机器人升级
```
❌ 旧功能：定时推送赚钱消息
✅ 新功能：智能客服自动回答问题
```

### 2. 工作方式
```
用户在聊天群发送问题
  ↓
智能匹配数据库中的问答
  ↓
延迟2秒后自动回复
  ↓
记录触发次数统计
```

---

## 📊 数据库配置

### 表名：`customer_service_qa`

### 字段说明
```sql
- question         问题标题
- answer          回答内容
- keywords        触发关键词数组
- category        分类（账户/充值/提现等）
- priority        优先级（数字越大越优先）
- is_active       是否启用
- trigger_count   触发次数统计
```

---

## 🎯 已内置的问答（15个）

### 账户相关（2个）
1. **如何注册账号**
   - 关键词：`注册`、`账号`、`怎么注册`
   
2. **忘记密码怎么办**
   - 关键词：`忘记密码`、`密码`、`重置密码`

### 充值相关（3个）
3. **如何充值**
   - 关键词：`充值`、`怎么充值`、`充值流程`
   
4. **充值多久到账**
   - 关键词：`到账`、`充值到账`、`多久到账`
   
5. **充值最低金额**
   - 关键词：`最低`、`最低充值`、`充值限额`

### 提现相关（3个）
6. **如何提现**
   - 关键词：`提现`、`怎么提现`、`取款`
   
7. **提现手续费**
   - 关键词：`手续费`、`提现手续费`、`费用`
   
8. **提现多久到账**
   - 关键词：`提现到账`、`提现时间`

### 收益相关（3个）
9. **AI学习机是什么**
   - 关键词：`学习机`、`AI学习机`、`学习卡`
   
10. **对碰系统是什么**
    - 关键词：`对碰`、`Binary`、`对碰系统`
    
11. **如何成为代理**
    - 关键词：`代理`、`成为代理`

### 其他（4个）
12. **邀请码在哪里**
    - 关键词：`邀请码`、`我的邀请码`
    
13. **联系客服**
    - 关键词：`客服`、`联系客服`、`人工客服`
    
14. **其他问题（默认回复）**
    - 关键词：`你好`、`在吗`、`hi`、`hello`
    
15. **未匹配时的引导回复**

---

## 🚀 如何使用

### Step 1: 执行SQL创建表（⏱️ 1分钟）
```
1. 打开 Supabase SQL Editor
2. 复制 "supabase/migrations/创建客服机器人配置.sql"
3. 粘贴并点击 RUN
4. 等待执行完成
```

### Step 2: 刷新页面（⏱️ 10秒）
```
1. 回到网站
2. 按 Ctrl+Shift+R 强制刷新
3. 进入"聊天群"
```

### Step 3: 测试智能客服（⏱️ 1分钟）
```
在聊天群发送：
- "如何充值" → 机器人2秒后自动回复充值流程
- "提现手续费" → 机器人自动回复费率说明
- "学习机" → 机器人自动回复学习机介绍
```

---

## 📝 后端管理问答（管理员）

### 方式1：直接在数据库修改
```sql
-- 查看所有问答
SELECT question, category, keywords
FROM customer_service_qa
WHERE is_active = true
ORDER BY category, priority DESC;

-- 添加新问答
INSERT INTO customer_service_qa (question, answer, keywords, category)
VALUES (
  '如何绑定钱包',
  '📱 绑定钱包流程：...',
  ARRAY['钱包', '绑定钱包'],
  '账户'
);

-- 修改回答
UPDATE customer_service_qa
SET answer = '新的回答内容'
WHERE question = '如何充值';

-- 禁用某个问答
UPDATE customer_service_qa
SET is_active = false
WHERE question = '旧问题';
```

### 方式2：管理页面（推荐-待实现）
```
路径：/admin/customer-service
功能：
- 查看所有问答
- 添加/编辑/删除问答
- 查看触发次数统计
- 批量导入/导出
```

---

## 🎯 测试示例

### 用户发送
```
"我想充值"
```

### 机器人回复（2秒后）
```
💰 充值流程：

1️⃣ 进入"个人中心"
2️⃣ 点击"充值"按钮
3️⃣ 选择网络（TRC20/ERC20）
4️⃣ 输入充值金额
5️⃣ 复制充值地址转账
6️⃣ 填写交易哈希提交

⏰ 管理员审核后自动到账
```

---

## 🔧 高级配置

### 匹配逻辑
```sql
-- 函数：match_customer_question
-- 匹配规则：
1. 优先匹配 keywords 数组中的关键词
2. 其次匹配 question 字段
3. 按 priority 降序排序
4. 返回第一个匹配结果
5. 无匹配时返回"默认"分类的回复
```

### 自定义回复延迟
```typescript
// src/views/chat/ChatView.vue
// 第854行修改延迟时间

setTimeout(async () => {
  // 发送回复
}, 2000) // 2秒 → 可改为 1000（1秒）或 3000（3秒）
```

### 添加更多关键词
```sql
UPDATE customer_service_qa
SET keywords = ARRAY['充值', '怎么充值', '如何充值', '充值流程', '怎么转账', '充钱']
WHERE question = '如何充值';
```

---

## 📊 统计功能

### 查看触发次数
```sql
SELECT 
  question,
  category,
  trigger_count,
  updated_at
FROM customer_service_qa
WHERE is_active = true
ORDER BY trigger_count DESC
LIMIT 10;
```

### 最受欢迎的问题
```sql
SELECT 
  category,
  COUNT(*) as question_count,
  SUM(trigger_count) as total_triggers
FROM customer_service_qa
WHERE is_active = true
GROUP BY category
ORDER BY total_triggers DESC;
```

---

## ⚠️ 注意事项

### 1. 两个群组的区别
```
AI科技空投群（ai_push）：
✅ 只有机器人推送空投
❌ 用户不能聊天
❌ 无智能客服

聊天群（default）：
✅ 用户可以聊天
✅ 智能客服自动回复
❌ 无空投推送
```

### 2. 关键词设置建议
```
✅ 好的关键词：简短、常用、明确
   - "充值"、"提现"、"学习机"
   
❌ 不好的关键词：太长、生僻、模糊
   - "我想要了解一下充值的流程"
```

### 3. 回答内容建议
```
✅ 使用emoji增加可读性
✅ 分步骤说明（1️⃣ 2️⃣ 3️⃣）
✅ 简洁明了
✅ 包含关键信息

❌ 避免过长的文字
❌ 避免专业术语
```

---

## 🚀 部署状态

### ✅ 前端已部署
```
提交：6019207
功能：智能客服自动回复
状态：Vercel自动部署中
```

### ⏳ 数据库待配置
```
文件：supabase/migrations/创建客服机器人配置.sql
操作：在Supabase SQL Editor中执行
时间：1分钟
```

---

## 🎯 下一步优化

### 1. 管理后台页面
```
路径：/admin/customer-service
功能：
- 可视化管理问答
- 查看统计图表
- 批量操作
```

### 2. AI智能匹配
```
集成GPT API：
- 更智能的问题理解
- 多轮对话支持
- 上下文记忆
```

### 3. 多语言支持
```
- 中文
- 英文
- 自动检测语言
```

---

**智能客服机器人已上线，等待Vercel部署完成后即可使用！** 🎉

