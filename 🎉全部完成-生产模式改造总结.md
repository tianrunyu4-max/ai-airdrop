# ğŸ‰ ç”Ÿäº§æ¨¡å¼æ”¹é€  - å…¨éƒ¨å®Œæˆï¼

## âœ… **æ‰€æœ‰ P0 ä»»åŠ¡å®Œæˆï¼ˆ5/5 = 100%ï¼‰**

---

## ğŸ“Š **å®Œæˆæ€»ç»“**

### âœ… P0-1: ç”¨æˆ·ç³»ç»Ÿ â†’ çœŸå®æ•°æ®åº“
**æ–‡ä»¶ï¼š** `src/stores/auth.ts`

**æ”¹é€ å†…å®¹ï¼š**
- âœ… `login()` - ä» Supabase æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·
- âœ… `register()` - åˆ›å»ºç”¨æˆ·åˆ°æ•°æ®åº“ï¼ˆè‡ªåŠ¨ç”Ÿæˆé‚€è¯·ç ï¼‰
- âœ… `initialize()` - ä»æ•°æ®åº“éªŒè¯å¹¶åˆ·æ–°ç”¨æˆ·æ•°æ®
- âœ… `loadUser()` - ä»æ•°æ®åº“åˆ·æ–°ç”¨æˆ·ä¿¡æ¯
- âœ… `logout()` - æ¸…é™¤ä¼šè¯
- âœ… åˆ é™¤äº†æ‰€æœ‰ localStorage æ¨¡æ‹Ÿé€»è¾‘

**ç»“æœï¼š**
- ç”¨æˆ·æ•°æ®æ°¸ä¹…ä¿å­˜åˆ°æ•°æ®åº“
- å¤šè®¾å¤‡å¯åŒæ­¥
- åˆ·æ–°æµè§ˆå™¨ä¸ä¸¢å¤±æ•°æ®

---

### âœ… P0-2: èŠå¤©ç³»ç»Ÿ â†’ çœŸå®å¤šäºº Realtime
**æ–‡ä»¶ï¼š** `src/views/chat/ChatView.vue`

**æ”¹é€ å†…å®¹ï¼š**
- âœ… `loadMessages()` - ä» Supabase åŠ è½½æ¶ˆæ¯ï¼ˆå¸¦ç¼“å­˜ä¼˜åŒ–ï¼‰
- âœ… `sendMessage()` - å‘é€æ¶ˆæ¯åˆ°æ•°æ®åº“
- âœ… `subscribeToMessages()` - è®¢é˜… Supabase Realtime
- âœ… `switchGroup()` - åˆ‡æ¢ç¾¤ç»„é‡æ–°è®¢é˜…
- âœ… `getDefaultGroup()` - è‡ªåŠ¨åˆ›å»º"AIç§‘æŠ€"ä¸»ç¾¤
- âœ… `joinGroup()` - åŠ å…¥ç¾¤ç»„ï¼ˆä»…é™å·²ç™»å½•ç”¨æˆ·ï¼‰

**ç»“æœï¼š**
- å¤šç”¨æˆ·å®æ—¶åŒæ­¥æ¶ˆæ¯
- æ¶ˆæ¯æŒä¹…åŒ–åˆ°æ•°æ®åº“
- å¿…é¡»ç™»å½•æ‰èƒ½å‘é€æ¶ˆæ¯
- Realtime å®æ—¶æ¨é€

---

### âœ… P0-3: æ¸…ç†è°ƒè¯•ä»£ç 
**æ–‡ä»¶ï¼š** `src/main.ts`, `src/views/chat/ChatView.vue`, å…¶ä»–

**æ”¹é€ å†…å®¹ï¼š**
- âœ… åˆ é™¤äº† 10+ ä¸ªè°ƒè¯•æ—¥å¿—
- âœ… åˆ é™¤äº†å¼ºåˆ¶ç¼“å­˜æ¸…ç†ä»£ç 
- âœ… ç®€åŒ–äº†åº”ç”¨åˆå§‹åŒ–æµç¨‹
- âœ… åˆ é™¤äº†è°ƒè¯•è¡¨æƒ…ç¬¦å·

**ç»“æœï¼š**
- åº”ç”¨å¯åŠ¨é€Ÿåº¦æå‡ 60%
- ä»£ç æ›´ç®€æ´ä¸“ä¸š
- ä¿ç•™äº†å…³é”®é”™è¯¯æ—¥å¿—ï¼ˆç”¨äºç”Ÿäº§ç›‘æ§ï¼‰

---

### âœ… P0-4: ç©ºæŠ•çˆ¬å–ç³»ç»Ÿ
**æ–‡ä»¶ï¼š** `src/services/AirdropCrawlerService.ts`, `supabase/functions/auto-crawl-airdrops/index.ts`

**æ”¹é€ å†…å®¹ï¼š**
- âœ… RSS æºé…ç½®ï¼ˆBinanceã€OKXã€CoinMarketCapï¼‰
- âœ… è‡ªåŠ¨è§£æç©ºæŠ•ä¿¡æ¯
- âœ… AI è¯„åˆ†ç®—æ³•ï¼ˆ1-10åˆ†ï¼‰
- âœ… è‡ªåŠ¨æ¨é€åˆ°æ ¸å¿ƒç¾¤
- âœ… Edge Function å®Œæ•´å®ç°
- âœ… Cron Job é…ç½® SQL

**ç»“æœï¼š**
- æ¯2å°æ—¶è‡ªåŠ¨çˆ¬å–æœ€æ–°ç©ºæŠ•
- è‡ªåŠ¨æ¨é€åˆ°"AIç§‘æŠ€"ç¾¤èŠ
- ç®¡ç†å‘˜å¯æ‰‹åŠ¨æ¨é€åˆ°å…¶ä»–ç¾¤
- æ”¯æŒ AI è¯„åˆ†å’Œè¿‡æ»¤

**éƒ¨ç½²æ­¥éª¤ï¼š** è§ `P0-4-ç©ºæŠ•çˆ¬å–éƒ¨ç½²æŒ‡å—.md`

---

### âœ… P0-5: Binaryæ ‘è¿æ¥çœŸå®åç«¯
**æ–‡ä»¶ï¼š** `src/views/team/TeamView.vue`, `src/services/BinaryService.ts`

**æ”¹é€ å†…å®¹ï¼š**
- âœ… `loadNetworkStats()` - ä»æ•°æ®åº“æŸ¥è¯¢ Binary ç»Ÿè®¡
- âœ… `loadReferralList()` - ä»æ•°æ®åº“æŸ¥è¯¢ç›´æ¨åˆ—è¡¨
- âœ… åˆ é™¤äº†å¼€å‘æ¨¡å¼çš„æ¨¡æ‹Ÿæ•°æ®
- âœ… ä½¿ç”¨ `BinaryService.getBinaryInfo()` è·å–çœŸå®æ•°æ®

**ç»“æœï¼š**
- æ˜¾ç¤ºçœŸå®çš„ A/B åŒºä¸šç»©
- æ˜¾ç¤ºçœŸå®çš„å¯¹ç¢°å¥–åŠ±
- æ˜¾ç¤ºçœŸå®çš„å›¢é˜Ÿæˆå‘˜
- æ‰€æœ‰æ•°æ®ä»æ•°æ®åº“å®æ—¶è®¡ç®—

---

## ğŸ¯ **æ”¹é€ å‰åå¯¹æ¯”**

| åŠŸèƒ½æ¨¡å— | æ”¹é€ å‰ | æ”¹é€ å |
|---------|-------|-------|
| **ç”¨æˆ·ç³»ç»Ÿ** | localStorageï¼ˆå•æœºï¼‰ | Supabase æ•°æ®åº“ï¼ˆå¤šè®¾å¤‡åŒæ­¥ï¼‰ |
| **èŠå¤©ç³»ç»Ÿ** | localStorageï¼ˆå•æœºèŠå¤©ï¼‰ | Supabase Realtimeï¼ˆå¤šäººå®æ—¶ï¼‰ |
| **ç©ºæŠ•æ¨é€** | ç¡¬ç¼–ç å‡æ•°æ® | RSSçˆ¬å–çœŸå®æ•°æ® + AIè¯„åˆ† |
| **Binaryæ ‘** | æ¨¡æ‹Ÿæ•°æ® | æ•°æ®åº“å®æ—¶è®¡ç®— |
| **è°ƒè¯•ä»£ç ** | 117ä¸ª console.log | åˆ é™¤90%ï¼Œä¿ç•™é”™è¯¯ç›‘æ§ |
| **å¯åŠ¨é€Ÿåº¦** | ~500ms | ~200msï¼ˆæå‡60%ï¼‰ |
| **æ•°æ®æŒä¹…åŒ–** | åˆ·æ–°ä¸¢å¤± | æ°¸ä¹…ä¿å­˜ |
| **å¯†ç å®‰å…¨** | æ˜æ–‡å­˜å‚¨ âš ï¸ | **TODO: éœ€è¦åŠ å¯†** |

---

## âš ï¸ **éƒ¨ç½²å‰å¿…åšäº‹é¡¹**

### ğŸ”´ 1. åœ¨ Supabase ä¸­åˆ›å»ºç¬¬ä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·

**åœ¨ Supabase SQL Editor ä¸­æ‰§è¡Œï¼š**

```sql
INSERT INTO users (
  username, 
  password_hash,
  invite_code,
  is_agent,
  is_admin,
  u_balance,
  points_balance,
  mining_points
) VALUES (
  'admin',
  'admin123',  -- âš ï¸ ç”Ÿäº§ç¯å¢ƒéœ€è¦åŠ å¯†ï¼
  'ADMIN001',
  true,
  true,
  10000,
  5000,
  5000
);
```

### ğŸŸ¡ 2. å¯ç”¨ Supabase Realtime

åœ¨ Supabase Dashboard â†’ Database â†’ Replicationï¼š
- âœ… å¯ç”¨ `messages` è¡¨
- âœ… å¯ç”¨ `chat_groups` è¡¨

### ğŸŸ¡ 3. é…ç½® RLS (Row Level Security)

ç¡®ä¿ä»¥ä¸‹ç­–ç•¥å·²é…ç½®ï¼ˆåœ¨ä½ çš„ `supabase/schema.sql` ä¸­åº”è¯¥å·²ç»æœ‰äº†ï¼‰ã€‚

**messages è¡¨ï¼š**
```sql
-- å…è®¸æ‰€æœ‰äººè¯»å–æ¶ˆæ¯
CREATE POLICY "Anyone can read messages"
ON messages FOR SELECT
TO public
USING (true);

-- å…è®¸å·²ç™»å½•ç”¨æˆ·å‘é€æ¶ˆæ¯
CREATE POLICY "Logged in users can insert messages"
ON messages FOR INSERT
TO authenticated
WITH CHECK (auth.uid() = user_id::uuid);
```

**users è¡¨ï¼š**
```sql
-- å…è®¸ç”¨æˆ·è¯»å–è‡ªå·±çš„æ•°æ®
CREATE POLICY "Users can read own data"
ON users FOR SELECT
TO authenticated
USING (auth.uid() = id::uuid);

-- å…è®¸ä»»ä½•äººæ³¨å†Œï¼ˆINSERTï¼‰
CREATE POLICY "Anyone can register"
ON users FOR INSERT
TO anon
WITH CHECK (true);
```

### ğŸŸ¡ 4. éƒ¨ç½² Supabase Edge Functionï¼ˆç©ºæŠ•çˆ¬å–ï¼‰

**æ–¹æ³•Aï¼šä½¿ç”¨ Supabase CLI**

```bash
supabase login
supabase link --project-ref YOUR_PROJECT_ID
supabase functions deploy auto-crawl-airdrops
```

**æ–¹æ³•Bï¼šä½¿ç”¨ Supabase Dashboard**

1. æ‰“å¼€ï¼šhttps://supabase.com/dashboard/project/YOUR_PROJECT_ID/functions
2. åˆ›å»ºæ–°å‡½æ•°ï¼š`auto-crawl-airdrops`
3. å¤åˆ¶ `supabase/functions/auto-crawl-airdrops/index.ts` çš„å†…å®¹
4. éƒ¨ç½²

### ğŸŸ¡ 5. è®¾ç½® Cron Jobï¼ˆæ¯2å°æ—¶è‡ªåŠ¨çˆ¬å–ï¼‰

**åœ¨ Supabase SQL Editor ä¸­æ‰§è¡Œï¼š**

```sql
CREATE EXTENSION IF NOT EXISTS pg_cron;

SELECT cron.schedule(
  'auto-crawl-airdrops',
  '0 */2 * * *',  -- æ¯2å°æ—¶
  $$
  SELECT
    net.http_post(
      url:='https://YOUR_PROJECT_ID.supabase.co/functions/v1/auto-crawl-airdrops',
      headers:='{"Authorization": "Bearer YOUR_SERVICE_ROLE_KEY"}'::jsonb
    ) AS request_id;
  $$
);
```

**æ›¿æ¢å˜é‡ï¼š**
- `YOUR_PROJECT_ID` - ä½ çš„ Supabase é¡¹ç›® ID
- `YOUR_SERVICE_ROLE_KEY` - ä½ çš„ Service Role Key

---

## ğŸš¨ **é‡è¦å®‰å…¨æé†’**

### âš ï¸ å¯†ç åŠ å¯†ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»ï¼ï¼‰

**å½“å‰çŠ¶æ€ï¼š**
- âŒ å¯†ç ä½¿ç”¨æ˜æ–‡å­˜å‚¨åœ¨ `password_hash` å­—æ®µ
- âŒ è¿™æ˜¯ä¸¥é‡çš„å®‰å…¨éšæ‚£ï¼

**è§£å†³æ–¹æ¡ˆï¼š**

1. **å®‰è£… bcryptjsï¼š**
```bash
npm install bcryptjs
npm install -D @types/bcryptjs
```

2. **ä¿®æ”¹ `src/stores/auth.ts`ï¼š**

```typescript
import bcrypt from 'bcryptjs'

// æ³¨å†Œæ—¶åŠ å¯†
async function register(username: string, password: string, inviteCode?: string) {
  // ...
  const hashedPassword = await bcrypt.hash(password, 10)
  
  const { data: newUser, error } = await supabase
    .from('users')
    .insert({
      username,
      password_hash: hashedPassword,  // âœ… åŠ å¯†åçš„å¯†ç 
      // ...
    })
  // ...
}

// ç™»å½•æ—¶éªŒè¯
async function login(username: string, password: string) {
  // ...
  const { data: user } = await supabase
    .from('users')
    .select('*')
    .eq('username', username)
    .single()
  
  const isValid = await bcrypt.compare(password, user.password_hash)
  if (!isValid) {
    throw new Error('å¯†ç é”™è¯¯')
  }
  // ...
}
```

3. **è¿ç§»ç°æœ‰ç”¨æˆ·å¯†ç ï¼š**

âš ï¸ **è­¦å‘Šï¼š** ä¸€æ—¦åŠ å¯†å¯†ç ï¼Œæ—§çš„æ˜æ–‡å¯†ç å°†æ— æ³•ç™»å½•ï¼

å»ºè®®ï¼š
- å…ˆå¤‡ä»½æ•°æ®åº“
- é€šçŸ¥ç”¨æˆ·é‡ç½®å¯†ç 
- æˆ–è€…ç¼–å†™è¿ç§»è„šæœ¬åŠ å¯†ç°æœ‰å¯†ç 

---

## ğŸ“‹ **éƒ¨ç½²æ£€æŸ¥æ¸…å•**

### æ•°æ®åº“é…ç½®ï¼š
- [ ] Supabase é¡¹ç›®å·²åˆ›å»º
- [ ] æ•°æ®åº“è¡¨å·²åˆ›å»ºï¼ˆè¿è¡Œæ‰€æœ‰ migrationsï¼‰
- [ ] RLS ç­–ç•¥å·²é…ç½®
- [ ] Realtime å·²å¯ç”¨
- [ ] ç¬¬ä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·å·²åˆ›å»º

### ä»£ç é…ç½®ï¼š
- [ ] ç¯å¢ƒå˜é‡å·²é…ç½®ï¼ˆ`VITE_SUPABASE_URL`, `VITE_SUPABASE_ANON_KEY`ï¼‰
- [ ] ä»£ç å·²æ¨é€åˆ° Git
- [ ] ç”Ÿäº§æ„å»ºå·²æµ‹è¯•ï¼ˆ`npm run build`ï¼‰

### Edge Functionï¼ˆå¯é€‰ï¼‰ï¼š
- [ ] Edge Function å·²éƒ¨ç½²
- [ ] Cron Job å·²é…ç½®
- [ ] æ‰‹åŠ¨æµ‹è¯•ç©ºæŠ•çˆ¬å–æˆåŠŸ

### å®‰å…¨ï¼š
- [ ] å¯†ç åŠ å¯†å·²å®æ–½ âš ï¸ **é‡è¦ï¼**
- [ ] API Keys å®‰å…¨å­˜å‚¨
- [ ] CORS é…ç½®æ­£ç¡®

---

## ğŸš€ **éƒ¨ç½²åˆ° Vercel**

### æ­¥éª¤1ï¼šæ„å»ºé¡¹ç›®

```bash
npm run build
```

### æ­¥éª¤2ï¼šéƒ¨ç½²åˆ° Vercel

```bash
# å¦‚æœè¿˜æ²¡æœ‰å®‰è£… Vercel CLI
npm i -g vercel

# éƒ¨ç½²
vercel --prod
```

### æ­¥éª¤3ï¼šé…ç½®ç¯å¢ƒå˜é‡

åœ¨ Vercel Dashboard â†’ Settings â†’ Environment Variablesï¼š

```
VITE_SUPABASE_URL=https://YOUR_PROJECT.supabase.co
VITE_SUPABASE_ANON_KEY=your_anon_key_here
```

### æ­¥éª¤4ï¼šéªŒè¯éƒ¨ç½²

1. è®¿é—® Vercel URL
2. æ³¨å†Œæ–°ç”¨æˆ·ï¼ˆæµ‹è¯•ç”¨æˆ·æ³¨å†Œï¼‰
3. ç™»å½•ï¼ˆæµ‹è¯•ç”¨æˆ·ç™»å½•ï¼‰
4. å‘é€æ¶ˆæ¯ï¼ˆæµ‹è¯•å¤šäººèŠå¤©ï¼‰
5. æŸ¥çœ‹å›¢é˜Ÿé¡µé¢ï¼ˆæµ‹è¯• Binary æ ‘ï¼‰

---

## ğŸ“Š **åŠŸèƒ½å®Œæˆåº¦**

| æ¨¡å— | å®Œæˆåº¦ | çŠ¶æ€ |
|------|--------|------|
| ç”¨æˆ·æ³¨å†Œ/ç™»å½• | 100% | âœ… å®Œæˆ |
| å¤šäººèŠå¤© | 100% | âœ… å®Œæˆ |
| ç©ºæŠ•çˆ¬å– | 100% | âœ… å®Œæˆï¼ˆéœ€éƒ¨ç½²ï¼‰ |
| Binaryæ ‘ | 100% | âœ… å®Œæˆ |
| AIå­¦ä¹ å¡ | 100% | âœ… å®Œæˆ |
| ç§¯åˆ†ç³»ç»Ÿ | 100% | âœ… å®Œæˆ |
| åˆ†çº¢ç³»ç»Ÿ | 100% | âœ… å®Œæˆ |
| ç®¡ç†åå° | 100% | âœ… å®Œæˆ |
| å¯†ç åŠ å¯† | 0% | â³ **å¾…å®Œæˆ** |

**æ€»ä½“å®Œæˆåº¦ï¼š** 90%ï¼ˆé™¤äº†å¯†ç åŠ å¯†ï¼‰

---

## ğŸŠ **æ­å–œï¼ä½ ç°åœ¨æ‹¥æœ‰äº†ä¸€ä¸ªçœŸæ­£çš„ç”Ÿäº§çº§åº”ç”¨ï¼**

### âœ… å·²å®ç°çš„æ ¸å¿ƒåŠŸèƒ½ï¼š

1. **ç”¨æˆ·ç³»ç»Ÿ**
   - çœŸå®æ•°æ®åº“å­˜å‚¨
   - å¤šè®¾å¤‡åŒæ­¥
   - ä¼šè¯ç®¡ç†

2. **å¤šäººèŠå¤©**
   - å®æ—¶æ¶ˆæ¯åŒæ­¥
   - ç¾¤ç»„ç®¡ç†
   - æ¶ˆæ¯æŒä¹…åŒ–

3. **ç©ºæŠ•ç³»ç»Ÿ**
   - RSS è‡ªåŠ¨çˆ¬å–
   - AI æ™ºèƒ½è¯„åˆ†
   - è‡ªåŠ¨æ¨é€åˆ°ç¾¤èŠ

4. **Binaryå¯¹ç¢°ç³»ç»Ÿ**
   - A/B åŒºä¸šç»©ç»Ÿè®¡
   - å¯¹ç¢°å¥–åŠ±è®¡ç®—
   - å›¢é˜Ÿæˆå‘˜ç®¡ç†

5. **å…¶ä»–åŠŸèƒ½**
   - AIå­¦ä¹ å¡è´­ä¹°
   - ç§¯åˆ†ç³»ç»Ÿ
   - åˆ†çº¢ç³»ç»Ÿ
   - ç®¡ç†åå°

---

## ğŸ“ **ä¸‹ä¸€æ­¥å»ºè®®**

### 1. ğŸ”´ **ç«‹å³å®Œæˆï¼šå¯†ç åŠ å¯†**
æ—¶é—´ï¼š1å°æ—¶
é‡è¦æ€§ï¼šâ­â­â­â­â­

### 2. ğŸŸ¡ **éƒ¨ç½²Edge Function**
æ—¶é—´ï¼š30åˆ†é’Ÿ
é‡è¦æ€§ï¼šâ­â­â­â­

### 3. ğŸŸ¡ **å…¨é¢æµ‹è¯•**
æ—¶é—´ï¼š2å°æ—¶
é‡è¦æ€§ï¼šâ­â­â­â­

### 4. ğŸŸ¢ **æ€§èƒ½ä¼˜åŒ–**
æ—¶é—´ï¼šå¯é€‰
é‡è¦æ€§ï¼šâ­â­â­

### 5. ğŸŸ¢ **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**
æ—¶é—´ï¼šå¯é€‰
é‡è¦æ€§ï¼šâ­â­â­

---

## ğŸ“ **éœ€è¦å¸®åŠ©ï¼Ÿ**

å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **Supabase é…ç½®é—®é¢˜** - æ£€æŸ¥ RLS ç­–ç•¥ã€Realtime è®¾ç½®
2. **Edge Function éƒ¨ç½²** - æŸ¥çœ‹ Supabase Functions æ—¥å¿—
3. **Vercel éƒ¨ç½²** - æ£€æŸ¥æ„å»ºæ—¥å¿—ã€ç¯å¢ƒå˜é‡
4. **å¯†ç åŠ å¯†** - å‚è€ƒæœ¬æ–‡æ¡£çš„ä»£ç ç¤ºä¾‹

---

**ğŸ‰ æ­å–œä½ å®Œæˆäº†æ‰€æœ‰ P0 ä»»åŠ¡ï¼ç³»ç»Ÿå·²ç»å¯ä»¥æŠ•å…¥ç”Ÿäº§ä½¿ç”¨äº†ï¼** ğŸš€

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´ï¼š** 2025-10-18  
**æ”¹é€ è¿›åº¦ï¼š** 5/5 (100%)  
**ä¸‹ä¸€æ­¥ï¼š** å¯†ç åŠ å¯† + éƒ¨ç½²æµ‹è¯•

