# 🤖 AI学习机核心逻辑文档

> **最后更新：** 2025-10-07  
> **版本：** v3.0（重大升级）

---

## 🔥 **V3.0 核心变更**
1. ✅ 基础释放率：**1%/天 → 10%/天**（提速10倍）
2. ✅ 出局倍数：**10倍 → 2倍**（快速回本）
3. ✅ 积分分配：**80%U/20%互转 → 70%U/30%互转**
4. ✅ 新增：**第一次免费送**（邀请人和团队可互转积分）
5. ✅ 新增：**复利滚存机制**（2倍→4倍→8倍→16倍...）
6. ✅ 修改：**重启机制清0销毁**所有积分
7. ❌ 取消：直推加速机制（简化逻辑，统一10%释放率）

---

## 📋 **核心参数**

### 1️⃣ **学习机基础配置**

| 参数 | 值 | 说明 |
|------|-----|------|
| **购买成本** | 100积分 = 7U | 代理邀请新人购买，邀请人获得7U |
| **首次购买** | 🎉 **免费送** | 第一次免费获得，邀请人和团队可互转积分学习 |
| **上限数量** | 10台/用户 | 每个用户最多同时拥有10台学习机 |
| **基础释放率** | **10%/天** | 每天释放初始投入的10%（提速10倍） |
| **出局条件** | **2倍** | 累计释放200积分后自动出局（20天回本） |
| **可兑换性** | 出局后可继续兑换积分 | 但不再每日释放 |

---

### 2️⃣ **每日释放规则**

#### 📊 **自动分配比例**
- ✅ **70% 自动兑换U**：直接到账U余额（100积分=7U）
- ✅ **30% 互转积分**：可赠送团队新伙伴学习AI

#### 💡 **释放计算公式**
```
每日释放量 = 初始投入 × 基础释放率
每日释放量 = 100积分 × 10% = 10积分/天
```

#### 💰 **每日收益分配（基础版）**
```
每日释放：10积分
├─ 70%转U：7积分 = 0.49U（直接到账）
└─ 30%互转：3积分（可赠送团队）

20天出局（100积分 × 2倍 = 200积分）
累计获得U：200 × 0.07 × 70% = 9.8U
投入产出比：9.8U ÷ 7U = 1.4倍（20天回本）
```

**注意：** V3.0 取消了直推加速机制，所有学习机统一10%释放率

---

### 3️⃣ **复利滚存机制（V3.0新增）**

#### 💎 **复利规则**
| 复利等级 | 出局倍数 | 总释放量 | 预计天数 | 说明 |
|----------|----------|----------|----------|------|
| 0（初始） | 2倍 | 200积分 | 20天 | 首次购买或复购 |
| 1 | 4倍 | 400积分 | 40天 | 2倍复利滚存 |
| 2 | 8倍 | 800积分 | 80天 | 4倍复利滚存 |
| 3 | 16倍 | 1600积分 | 160天 | 8倍复利滚存 |
| 4 | 32倍 | 3200积分 | 320天 | 16倍复利滚存 |
| 5 | 64倍 | 6400积分 | 640天 | 32倍复利滚存 |
| 6+ | ... | ... | ... | 持续复利 |

#### 🚀 **复利要点**
1. ✅ 出局后可选择**复利滚存**或**重新复购**
2. ✅ 复利滚存**免费**，无需额外支付
3. ✅ 每次复利，出局倍数翻倍：2→4→8→16→32...
4. ✅ 复利滚存后，积分清0重新计算
5. ✅ 保持10%日释放率不变

#### 💰 **复利滚存示例**
```
初始：100积分，2倍出局（200积分）→ 20天出局
↓ 选择复利滚存（免费）
第1次复利：100积分，4倍出局（400积分）→ 40天出局
↓ 选择复利滚存（免费）
第2次复利：100积分，8倍出局（800积分）→ 80天出局
↓ 选择复利滚存（免费）
第3次复利：100积分，16倍出局（1600积分）→ 160天出局
```

---

### 4️⃣ **重启机制（V3.0修改）**

#### 🔄 **重启规则**
| 项目 | 说明 |
|------|------|
| **触发条件** | 后端执行积分释放压力大时 |
| **重启方式** | 手动重启（前端按钮+提示） + 后端自动重启 |
| **重启效果** | 🔥 **所有积分清0销毁** |
| **重启倍数** | **2倍出局**（200积分） |
| **释放率** | 保持5%不变 |
| **排队机制** | 重启后继续可以兑换积分排队，继续释放 |
| **费用** | 免费重启，无需额外支付 |

#### 💰 **重启示例**
```
原学习机：100积分，2倍出局（200积分）
↓ 出局
重启：所有积分清0销毁，重新开始2倍出局（200积分）
↓ 出局
再重启：所有积分清0销毁，重新开始2倍出局（200积分）
```

#### ⚠️ **重启注意事项**
1. 重启后**所有累计积分清0销毁**
2. 重启后**重新开始2倍出局**
3. 重启**无限次数**，可一直重启
4. 重启后**保持5%释放率**
5. 复利等级重置为0

---

### 5️⃣ **出局与复购**

#### 🛑 **出局规则**
| 出局类型 | 倍数 | 释放总量 | 是否停止释放 |
|----------|------|----------|--------------|
| 首次出局 | 2倍 | 200积分 | ✅ 停止 |
| 复利出局 | 4/8/16/32倍 | 动态 | ✅ 停止 |
| 重启出局 | 2倍 | 200积分 | ✅ 停止 |

#### 💎 **出局后选择**
出局后有3种选择：

1. **复购学习**（需支付）
   - 重新支付**7U（100积分）**
   - 购买新学习机，重新开始2倍出局
   - 邀请人**再次获得7U奖励**

2. **复利滚存**（免费推荐）
   - **免费**，无需额外支付
   - 倍数翻倍：2倍→4倍→8倍→16倍...
   - 保持5%释放率

3. **停止学习**
   - 不再参与，等待下次机会

---

### 6️⃣ **邀请奖励**

#### 🎁 **购买奖励**
- 当下级（直推）购买AI学习机时
- 邀请人**立即获得7U**
- 前提：邀请人必须是**代理身份**
- **注意：** 第一次免费送不触发奖励，第二次购买起才奖励

#### 📝 **示例**
```
用户A（代理）邀请用户B
用户B第1次获得学习机（免费送）→ A无奖励
用户B第2次购买学习机（7U）→ A获得7U奖励
用户B第3次购买学习机（7U）→ A获得7U奖励
```

---

## 🔧 **技术实现（V3.0）**

### 📂 **核心文件**
1. `src/config/mining.ts` - 配置文件（V3.0更新）
2. `src/services/MiningService.ts` - 业务逻辑（V3.0重构）
3. `src/views/points/PointsView.vue` - 前端页面

### 🎯 **关键函数**
- `purchaseMachine()` - 购买学习机（第一次免费送，含邀请人奖励）
- `releaseDailyPoints()` - 每日释放（70%转U，30%互转，10%日释放率）
- `compoundReinvest()` - 复利滚存（2倍→4倍→8倍→16倍...）
- `manualRestart()` - 手动重启（2倍出局，积分清0销毁）
- `autoRestartAllExited()` - 后端自动重启所有出局学习机

---

## ✅ **逻辑验证清单（V3.0）**

- [x] 购买成本：100积分 = 7U
- [x] 第一次免费送
- [x] 邀请人奖励：7U（代理，第二次购买起）
- [x] 上限：10台/用户
- [x] 基础释放：**10%/天**（提速10倍）
- [x] 出局条件：**2倍**（快速回本）
- [x] 出局后停止释放
- [x] 每日分配：**70%转U，30%互转**
- [x] 复利滚存：2倍→4倍→8倍→16倍...（免费）
- [x] 重启机制：手动+自动，2倍出局，**积分清0销毁**
- [x] 复购按钮：出局后显示"复购学习"或"复利滚存"
- [x] 复购成本：7U（100积分）
- [x] 取消直推加速机制

---

## 📊 **收益计算示例（V3.0）**

### 示例1：基础版（2倍出局）
```
购买：1台学习机（首次免费或100积分=7U）
释放率：10%/天
每日释放：10积分
├─ 70%转U：7积分 = 0.49U
└─ 30%互转：3积分

出局时间：200积分 ÷ 10积分/天 = 20天
累计获得U：200 × 0.07 × 70% = 9.8U
投入产出比：9.8U ÷ 7U = 1.4倍（20天回本140%）
```

### 示例2：复利1次（4倍出局）
```
初始：100积分，2倍出局（200积分）→ 20天
↓ 选择复利滚存（免费）
复利：100积分，4倍出局（400积分）→ 40天
每日释放：10积分
├─ 70%转U：7积分 = 0.49U
└─ 30%互转：3积分

累计天数：20 + 40 = 60天
累计获得U：(200 + 400) × 0.07 × 70% = 29.4U
投入产出比：29.4U ÷ 7U = 4.2倍（60天回本420%）
```

### 示例3：复利3次（16倍出局）
```
初始：100积分，2倍出局（200积分）→ 20天
↓ 复利1次
4倍出局（400积分）→ 40天
↓ 复利2次
8倍出局（800积分）→ 80天
↓ 复利3次
16倍出局（1600积分）→ 160天

累计天数：20 + 40 + 80 + 160 = 300天
累计获得U：(200 + 400 + 800 + 1600) × 0.07 × 70% = 147U
投入产出比：147U ÷ 7U = 21倍（300天回本2100%）
```

---

## 🎉 **结论（V3.0）**

AI学习机V3.0通过**简化、提速、复利**的设计理念，实现了：

1. ✅ **快速回本**（2倍出局，20天完成）
2. ✅ **高速释放**（10%日释放率，提速10倍）
3. ✅ **复利滚存**（免费复利，2→4→8→16倍...）
4. ✅ **简单明了**（取消加速机制，统一规则）
5. ✅ **灵活分配**（70%转U，30%互转团队）
6. ✅ **首次免费**（降低门槛，团队互转积分学习）
7. ✅ **可持续发展**（重启机制清0销毁，避免通胀）

**V3.0核心理念：** 快速回本 · 复利滚存 · 持续创薪 🚀

---

## 🆚 **V2.0 vs V3.0 对比**

| 项目 | V2.0 | V3.0 | 变化 |
|------|------|------|------|
| 基础释放率 | 1%/天 | **10%/天** | 🚀 提速10倍 |
| 出局倍数 | 10倍 | **2倍** | ⚡ 快速回本 |
| 积分分配 | 80%U/20%互转 | **70%U/30%互转** | 💰 更多互转 |
| 直推加速 | 1.5%/人，最高10% | **取消** | ✅ 简化规则 |
| 第一次购买 | 100积分 | **免费送** | 🎁 降低门槛 |
| 复利机制 | ❌ 无 | **2→4→8→16倍** | 💎 复利滚存 |
| 重启机制 | 5倍出局 | **2倍出局，清0销毁** | 🔄 避免通胀 |
| 出局时间 | 91-1000天 | **20天** | ⚡ 快速周转 |


